<%= form_with(model: @user, local: true) do |f| %>
  <div class="row">
    <div class="col s12">
      <div class="row">
        <div class="file-field input-field">
          <div class="btn">
            <span>アイコン画像</span>
            <%= f.file_field :image %>
            <%= f.hidden_field :image_cache %>
          </div>
          <div class="file-path-wrapper">
            <%= image_tag @user.image.url, alt: 'アイコン画像' if @user.image? %>
            <input class="file-path validate" type="text">
            <% if @user.errors.include?(:image) %>
              <p class="error-message"><%= @user.errors.full_messages_for(:image).first %></p>
            <% end %>
          </div>
        </div>
        <div class="input-field col s12">
          <i class="material-icons prefix">person</i>
          <%= f.text_field :name, data: { length: '50' }, class: 'character-counter' %>
          <%= f.label :name, "ユーザー名（50文字以内）" %>
          <% if @user.errors.include?(:name) %>
            <p class="error-message"><%= @user.errors.full_messages_for(:name).first %></p>
          <% end %>
        </div>
        <div class="input-field col s12">
          <i class="material-icons prefix">email</i>
          <%= f.email_field :email %>
          <%= f.label :email, "メールアドレス" %>
          <% if @user.errors.include?(:email) %>
            <p class="error-message"><%= @user.errors.full_messages_for(:email).first %></p>
          <% end %>
        </div>
        <div class="input-field col s12">
          <i class="material-icons prefix">lock</i>
          <%= f.password_field :password %>
          <%= f.label :password, "パスワード（6文字以上）" %>
          <% if @user.errors.include?(:password) %>
            <p class="error-message"><%= @user.errors.full_messages_for(:password).first %></p>
          <% end %>
        </div>
        <div class="input-field col s12">
          <i class="material-icons prefix">lock</i>
          <%= f.password_field :password_confirmation %>
          <%= f.label :password_confirmation, "確認用パスワード" %>
          <% if @user.errors.include?(:password_confirmation) %>
            <p class="error-message"><%= @user.errors.full_messages_for(:password_confirmation).first %></p>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  <button class="btn waves-effect waves-light" type="submit" name="action">
    <%= yield(:button_text) %>
    <i class="material-icons right">send</i>
  </button>
<% end %>
